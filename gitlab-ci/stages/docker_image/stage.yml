# This Source Code Form is subject to the terms of the Mozilla Public
# License, v. 2.0. If a copy of the MPL was not distributed with this
# file, You can obtain one at http://mozilla.org/MPL/2.0/.
---

loader: jobgraph.loader.transform:loader

transforms:
- jobgraph.transforms.docker_in_docker:transforms
- jobgraph.transforms.docker_image:transforms
- jobgraph.transforms.job:transforms


job_defaults:
    container_registry_type: gitlab
    image_name_template:
        by_head_ref_protection:
            protected: "{job_name}"
            unprotected: "unprotected/{job_name}"
    push_as_latest:
        by_head_ref:
            main: True
            default: False


jobs:
    python_base: {}
    decision:
        parent: python_base
    python_test:
        parent: python_base
